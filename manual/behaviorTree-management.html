<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>BehaviorTree Management | Developer Reference </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="BehaviorTree Management | Developer Reference ">
    <meta name="generator" content="docfx 2.59.4.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="behaviortree-management">BehaviorTree Management</h1>

<p>BehaviorTree(BT)를 관리(수정)하기 위한 문서입니다. BT는 무엇인지, 그리고 왜 사용하는지에 대한 정보 또한 얻을 수 있습니다.</p>
<h3 id="behaviortree란">BehaviorTree란?</h3>
<hr>
<p><a href="https://en.wikipedia.org/wiki/Behavior_tree_(artificial_intelligence,_robotics_and_control)">BehaviorTree</a>란 게임에서 <strong>Behavior(행동)</strong> 을 <a href="https://gmlwjd9405.github.io/2018/08/12/data-structure-tree.html">Tree</a>구조로 만들어 AI의 행동을 관리(제어) 하는 것이다.</p>
<p>즉, BT는 Tree구조로 이루어져 있고, 그 Tree는 <strong>Node</strong>를 저장하는 컨테이너로 볼 수 있다.</p>
<blockquote><p>Node란, 사용자가 정의할 수 있거나 이미 정의되어 있는 타입이 저장되어 있을 수 있다. BT에서는 행동이 Node로 저장되어 있다.</p>
</blockquote>
<p>BT는 Node 탐색을 <a href="https://gmlwjd9405.github.io/2018/08/14/algorithm-dfs.html">DFS</a>순서에 따라 노드를 실행시킨다.</p>
<p><img src="../resources/BehaviorTree/dfs-example.png" alt="DFS_Image"></p>
<p>BT에서는 Node를 방문시 무조건 그 Node를 실행시킨다. 그리고 반환값이 존재하며 실행시킨 Node에게서 반환값을 받는다. 그 반환값에 따라 우선순위 혹은 건너뛰기 등을 알거나 할 수 있다.</p>
<p>우리가 사용할 BT에서는 여러가지 Category로 Node들이 나뉘어져 있는데, Action, Decorator, Composite, Conditonal가 대표적이다.
Node상태는 Invalid, Running, Success, Failure로 이루어져있다. Node를 실행시키게 된다면 앞의 Node상태를 반환값으로 받는다.</p>
<h5 id="node-종류">Node 종류</h5>
<ul>
<li>Composite<ul>
<li>Sequence : 자식노드를 왼쪽에서부터 오른쪽으로 실행시킨다. 만약 자식노드가 Failure를 반환한다면, Composite노드 또한 Failure상태를 부모노드에게 반환한다. 모든 자식노드가 Success를 반환한다면 Success상태를 반환한다. 만약 하나의 자식노드라도 Running상태라면 부모노드에게 Running상태를 반환한다.</li>
<li>Selector : 자식노드들을 왼쪽에서부터 오른쪽으로 탐색하며 실행시킨다. 만약 하나의 노드라도 Success를 반환 받는다면, 탐색을 중지하고 부모노드에게 Success를 반환한다.</li>
<li>RandomSelector : 자식노드들의 순서와 상관없이 Random으로 자식노드를 실행시킨다. 만약 실행시킨 자식노드가 Success를 반환한다면 부모노드에게 Success를 반환한다.</li>
<li>...</li>
</ul>
</li>
<li>Decorator<ul>
<li>Repeat : 자식노드의 반환값에 관계없이 계속해서 자식노드를 실행시킨다.</li>
<li>...</li>
</ul>
</li>
<li>Conditional<ul>
<li>미리 정의된 조건에 부합한다면, Success를 반환한다. 아니라면 Failure.</li>
</ul>
</li>
<li>Action<ul>
<li>BT가 코드를 실행시킨 뒤, AI가 특정 행동을 하도록 시키는 노드.</li>
</ul>
</li>
</ul>
<h3 id="unity에서-behaviortree-활용하기">Unity에서 BehaviorTree 활용하기</h3>
<hr>
<p>우리가 사용할 BT는 ScriptableObject(SO)로 제작되었으며, Node들 또한 SO 제작되었다.</p>
<h5 id="behaviortree-만들기">BehaviorTree 만들기</h5>
<p><img src="../resources/BehaviorTree/create-behavior-tree.png" alt="Create_Behavior_Tree"></p>
<h5 id="behaviortree-editor-사용법">BehaviorTree Editor 사용법</h5>
<p>이제 우리는 생성한 BT를 수정(편집)해기 위해서는 BT Editor를 열어야한다. 생성된 BT를 더블 클릭하면 Editor를 열 수 있다.
<img src="../resources/BehaviorTree/bt-open.png" alt="Open_Behavior_Tree"></p>
<p>열린 BT Editor의 모습.</p>
<p><img src="../resources/BehaviorTree/default-bt-editor.png" alt="Default_BT_Editor"></p>
<h5 id="노드-관리">노드 관리</h5>
<h6 id="노드-생성">노드 생성</h6>
<p>다른 노드를을 생성하기 위해서는 TreeView(Grid)쪽에서 오른쪽 마우스 클릭을 한 후, 생성하고 싶은 노드를 선택하면 생성할 수 있다.</p>
<p><img src="../resources/BehaviorTree/create-new-node.png" alt="Create_New_Node"></p>
<h6 id="노드-연결">노드 연결</h6>
<p>예시로 만들어본 BT. Node들끼리 Edge를 통해서 연결 할 수 있다. (이때 부모 자식간의 관계가 설정된다.)</p>
<p><img src="../resources/BehaviorTree/bt-example.png" alt="BehaviorTree_Example"></p>
<h6 id="노드-정보">노드 정보</h6>
<p>또한 Node를 선택하면 그 Node의 Inspector창이 열리는데, 그 때 그 노드에 관한 정보를 수정할 수 있다.</p>
<p><img src="../resources/BehaviorTree/node-inspector.png" alt="Node_Inspector"></p>
<h5 id="bt-실행">BT 실행</h5>
<h6 id="bt-runner-component-추가">BT Runner component 추가</h6>
<p>이렇게 생성된 BT는 <code>BehaviorTreeRunner</code> 가 실행시킬 수 있다.</p>
<p><img src="../resources/BehaviorTree/bt-runner.png" alt="BehaviorTree_Runner"></p>
<h6 id="실행시킨-결과">실행시킨 결과</h6>
<p><img src="../resources/BehaviorTree/bt-runner-result.gif" alt="Behavior-Runner-Result"></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Team-StormHawk/ClearSkies/blob/main/Documentation/manual/behaviorTree-management.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
